window.onload=function(){function a(a,b){this.x=a,this.y=b}function b(a,b,c){return c="undefined"!=typeof c?c:0,{points:b,fill:a,tick:c,step:function(){this.tick+=parseFloat(n.value)}}}function c(){i.width=window.innerWidth,i.height=window.innerHeight}function d(a){j.clearRect(0,0,i.width,i.height),j.globalCompositeOperation=p.value;for(var b=0;b<g.length;b++){var c=g[b];e(j,c),c.step()}o.checked&&j.drawImage(r,window.innerWidth/2-261,window.innerHeight/2-310),window.requestAnimationFrame(d)}function e(a,b){var c=b.points.split(" "),d=b.fill,e=b.fill;q.checked&&(c[0]=h.x+","+h.y),a.strokeStyle=d,a.fillStyle=e,a.beginPath();for(var f=0;f<c.length;f++){var g=c[f],i=parseFloat(g.split(",")[0]),j=parseFloat(g.split(",")[1]);k.checked&&(1==f?i+=Math.sin(b.tick)*m.value:2==f&&(j+=Math.sin(b.tick)*m.value)),0===f&&q.checked||(i+=(window.innerWidth-522)/2,j+=(window.innerHeight-620)/2),1>f?a.moveTo(i,j):a.lineTo(i,j)}a.closePath(),l.checked?a.fill():a.stroke()}function f(){var a=new Image,b=(window.URL||window.webkitURL||window,document.querySelector("#wolf").outerHTML,(new XMLSerializer).serializeToString(document.querySelector("#wolf"))),c=new Blob([b],{type:"image/svg+xml;charset=utf-8"}),d=self.URL||self.webkitURL||self,e=d.createObjectURL(c);return a.width="522",a.height="620",a.addEventListener("load",function(){j.drawImage(a,window.innerWidth/2-261,window.innerHeight/2-310),d.revokeObjectURL(e)}),a.src=e,a}var g=[],h=new a(.5*window.innerWidth,.5*window.innerHeight),i=document.getElementById("canvas"),j=i.getContext("2d"),k=document.querySelector('input[name="osscillate"]'),l=document.querySelector('input[name="fill_polygons"]'),m=document.querySelector('input[name="osc_range"]'),n=document.querySelector('input[name="osc_freq"]'),o=document.querySelector('input[name="draw_non_poly"]'),p=document.getElementById("compmode"),q=document.querySelector('input[name="follow_mouse"]');document.body.onmousemove=function(b){h=new a(b.pageX,b.pageY)},window.onresize=function(){c()},c(),function(){for(var a=document.querySelectorAll("#wolf polygon"),c=0;c<a.length;c++){var d=a[c],e=d.getAttribute("points").trim(),f=d.getAttribute("fill");d.remove(),g.push(new b(f,e))}}();var r=f();window.requestAnimationFrame(d)};