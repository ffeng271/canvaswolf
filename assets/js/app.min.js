window.onload=function(){function a(){f.width=window.innerWidth,f.height=window.innerHeight}function b(a){i.clearRect(0,0,f.width,f.height),i.globalCompositeOperation="multiply";for(var d=0;d<e.length;d++){var g=e[d];c(i,g),g.step()}drawNonPoly.checked&&i.drawImage(source,window.innerWidth/2-261,window.innerHeight/2-310),window.requestAnimationFrame(b)}function c(a,b){var c=b.points.split(" "),d=b.fill,e=b.fill;a.strokeStyle=d,a.fillStyle=e,a.beginPath();for(var f=0;f<c.length;f++){var h=c[f],i=parseFloat(h.split(",")[0]),j=parseFloat(h.split(",")[1]);1==f?i+=Math.sin(b.tick)*g:2==f&&(j+=Math.sin(b.tick)*g),i+=(window.innerWidth-522)/2,j+=(window.innerHeight-620)/2,1>f?a.moveTo(i,j):a.lineTo(i,j)}a.closePath(),a.fill()}function d(a,b,c){return c="undefined"!=typeof c?c:0,{points:b,fill:a,tick:c,step:function(){this.tick+=parseFloat(h)}}}var e=[],f=document.getElementById("canvas"),g=8,h=.01,i=f.getContext("2d");window.onresize=function(){a()},a(),function(){for(var a=document.querySelectorAll("#art polygon"),b=0;b<a.length;b++){var c=a[b],f=c.getAttribute("points").trim(),g=c.getAttribute("fill");c.remove(),e.push(d(g,f))}}(),window.requestAnimationFrame(b)};